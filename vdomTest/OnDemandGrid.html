<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Test dgrid vdom OnDemandGrid</title>
	<meta name="viewport" content="width=570">
	<style>
		@import "../../dojo/resources/dojo.css";
		@import "../css/dgrid.css";
		@import "../../dijit/themes/claro/claro.css";
		@import "../css/skins/claro.css";

		.dgrid {
			width: 1200px;
			height: 200px;
			margin: 20px 0 0 50px;
		}

		.heading {
			margin-left: 20px;
			margin-top: 20px;
			font-weight: bold;
		}
	</style>
</head>
<body class="claro">
<div class="heading">vdom grid</div>
<div id="vdomGrid"></div>
<div>
	<button id="modifyButton1">Modify</button>
</div>
<div class="heading">grid</div>
<div id="grid"></div>
<div>
	<button id="modifyButton2">Modify</button>
</div>
<script src="../../dojo/dojo.js" data-dojo-config="async: true"></script>
<script>
	var NUMBER_OF_DATA_COLUMNS = 12;
	require({
		packages: [
			{ name: 'maquette', location: '../dgrid/node_modules/maquette/dist', main: 'maquette' }
		]
	}, [
		'maquette',
		'dojo/on',
		'dgrid/OnDemandGrid',
		'dgrid/vdom/OnDemandGrid',
		'dgrid/_StoreMixin',
		'dgrid/vdom/_StoreMixin',
		'dgrid/vdomTest/util'
	], function (maquette, on, OnDemandGrid, VdomOnDemandGrid, StoreMixin, VdomStoreMixin, util) {
		var projector = maquette.createProjector();

		// createAsyncStore clones data, so we only have to populate it once
		var data = util.makeData(20000, NUMBER_OF_DATA_COLUMNS);
		var vdomStore = util.makeStore({ data: data });
		var store = util.makeStore({ data: data });

		var vdomGrid = new VdomOnDemandGrid({
			id: 'vdomGrid',
			projector: projector,
			columns: util.makeColumnDef(NUMBER_OF_DATA_COLUMNS),
			collection: vdomStore
		});
		projector.append(document.getElementById(vdomGrid.id), function () {
			return vdomGrid.render();
		});

		var grid = new OnDemandGrid({
			columns: util.makeColumnDef(NUMBER_OF_DATA_COLUMNS),
			collection: store
		}, 'grid');

		on(document.getElementById('modifyButton1'), 'click', function () {
			util.modifyItem(vdomStore);
		});
		on(document.getElementById('modifyButton2'), 'click', function () {
			util.modifyItem(store);
		});
	});
</script>
</body>
</html>