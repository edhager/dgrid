<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Test dgrid vdom OnDemandList</title>
	<meta name="viewport" content="width=570">
	<style>
		@import "../../dojo/resources/dojo.css";
		@import "../css/dgrid.css";
		@import "../../dijit/themes/claro/claro.css";
		@import "../css/skins/claro.css";

		.dgrid {
			width: 1200px;
			height: 200px;
			margin: 20px 0 0 50px;
		}

		.heading {
			margin-left: 20px;
			margin-top: 20px;
			font-weight: bold;
		}
	</style>
</head>
<body class="claro">
<div class="heading">vdom list</div>
<div id="vdomGrid"></div>
<div class="heading">list</div>
<div id="grid"></div>
<script src="../../dojo/dojo.js" data-dojo-config="async: true"></script>
<script>
	var NUMBER_OF_DATA_COLUMNS = 12;
	require({
		packages: [
			{ name: 'maquette', location: '../dgrid/node_modules/maquette/dist', main: 'maquette' }
		]
	}, [
		'maquette',
		'dojo/on',
		'dgrid/OnDemandList',
		'dgrid/vdom/OnDemandList',
		'dgrid/vdom/hyperscript',
		'dgrid/_StoreMixin',
		'dgrid/vdom/_StoreMixin',
		'dgrid/vdomTest/util'
	], function (maquette, on, OnDemandList, VdomOnDemandList, h, StoreMixin, VdomStoreMixin, util) {
		var projector = maquette.createProjector();

		var data = util.makeData(20000, 0);

		// createSyncStore clones data, so we only have to populate it once above
		var vdomStore = util.makeStore({ data: data });
		var store = util.makeStore({ data: data });

		// Pass the proj
		var vdomGrid = new VdomOnDemandList({
			id: 'vdomGrid',
			projector: projector,
			collection: vdomStore,
			renderRow: function (item) {
				return h('div', item.id);
			}
		});
		projector.append(document.getElementById(vdomGrid.id), function () {
			return vdomGrid.render();
		});

		var grid = new OnDemandList({
			collection: store,
			renderRow: function (item) {
				var div = document.createElement('div');
				div.textContent = item.id;
				return div;
			}
		}, 'grid');
	});
</script>
</body>
</html>